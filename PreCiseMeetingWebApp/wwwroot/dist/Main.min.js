var E=(t,n)=>()=>(t&&(n=t(t=0)),n);var N=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var v=(t,n,o)=>new Promise((r,i)=>{var s=g=>{try{a(o.next(g))}catch(f){i(f)}},l=g=>{try{a(o.throw(g))}catch(f){i(f)}},a=g=>g.done?r(g.value):Promise.resolve(g.value).then(s,l);a((o=o.apply(t,n)).next())});var m,k=E(()=>{"use strict";m=class extends Error{constructor(n){super(n),this.name="PreCiseException"}}});var u,e,h=E(()=>{"use strict";k();u=class u{static setLogLevel(n){u.CURRENT_LEVEL=n}static log(n,o,r,i){if(u.LogLevelPriority[n]<u.LogLevelPriority[u.CURRENT_LEVEL])return;let s=this.getLogHeader(n,o,r);i&&(s+=` ${i}`),console.log(s)}static error(n,o,r,i){if(u.LogLevelPriority[n]<u.LogLevelPriority[u.CURRENT_LEVEL])return;let s=this.getLogHeader(n,o,r);if(i&&i.message){let l="",a="";i instanceof m?l=this.nameof(m):(l="Unexpected Error",i.stack&&(a=`${typeof window=="undefined"?`\r
`:`
`}${i.stack}`)),s+=` ${l}: ${i.message}${a}`}console.log(s)}static getLogHeader(n,o,r){let i=new Date,s="";return typeof o=="string"?s=`${o}.`:s=`${this.nameof(o)}.`,`[${i}] [${n}] [${s}${this.nameof(r)}()]`}static nameof(n){return n.name}};u.LogLevel={TRACE:"TRACE",DEBUG:"DEBUG",TEST:"TEST",INFO:"INFO",PROD:"PROD",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL"},u.LogLevelPriority={[u.LogLevel.TRACE]:0,[u.LogLevel.DEBUG]:1,[u.LogLevel.TEST]:2,[u.LogLevel.INFO]:3,[u.LogLevel.PROD]:4,[u.LogLevel.WARN]:5,[u.LogLevel.ERROR]:6,[u.LogLevel.FATAL]:7},u.CURRENT_LEVEL=u.LogLevel.PROD;e=u});var O,c,L,I=E(()=>{"use strict";h();O={Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday"},c=class c{static formatDateString(n,o={weekday:"long",year:"numeric",month:"long",day:"numeric"}){return e.log(e.LogLevel.TRACE,c,c.formatDateString),n.toLocaleDateString("en-US",o)}static convertUtcDateToLocal(n=new Date){e.log(e.LogLevel.TRACE,c,c.convertUtcDateToLocal);let o=new Date().getTimezoneOffset();return new Date(n.getTime()-o*6e4)}static getDayOfWeek(n){e.log(e.LogLevel.TRACE,c,c.getDayOfWeek);let o=n.getDay();return Object.keys(O)[o]}static getDayOfYear(n){e.log(e.LogLevel.TRACE,c,c.getDayOfYear);let o=new Date(n.getFullYear(),0,0),r=n.getTime()-o.getTime();return Math.floor(r/this.MILLISECONDS_IN_ONE_DAY_IN)}static getDayOfWeekOfYear(n,o){e.log(e.LogLevel.TRACE,c,c.getDayOfWeekOfYear);let r=Object.keys(O).indexOf(o);if(n.getDay()!==r)return 0;let i=this.getDayOfYear(n);return Math.floor(i/this.DAYS_IN_WEEK)+1}static isLeapYear(n){return e.log(e.LogLevel.TRACE,c,c.isLeapYear),n%4===0&&n%100!==0||n%400===0}static getNumDaysInYear(n){e.log(e.LogLevel.TRACE,c,c.getNumDaysInYear);let o=n.getFullYear(),r=this.NORMAL_DAYS_IN_YEAR;return this.isLeapYear(o)&&r++,r}static getNumWeeksInYear(n){e.log(e.LogLevel.TRACE,c,c.getNumWeeksInYear);let o=n.getFullYear(),r=this.isLeapYear(o),i=new Date(o,0,1),s=new Date(o,12,31),l=this.getDayOfWeek(i),a=this.getDayOfWeek(s),g=l===O.Thursday||r&&a===O.Wednesday,f=this.NORMAL_WEEKS_IN_YEAR;return g&&f++,f}};c.DAYS_IN_WEEK=7,c.NORMAL_DAYS_IN_YEAR=365,c.NORMAL_WEEKS_IN_YEAR=52,c.MILLISECONDS_IN_ONE_DAY_IN=1e3*60*60*24;L=c});var w,R=E(()=>{"use strict";h();k();w=class t{static asyncGetUtcDateFromContents(n){return v(this,null,function*(){e.log(e.LogLevel.INFO,t,t.asyncGetUtcDateFromContents);let o=null;try{let r="publish details file";if(!n)throw new m(`file name path to ${r} is null or empty.`);let i=yield fetch(n);if(!i.ok)throw new m(`failed to fetch ${r}.`);let s=yield i.text();if(!s)throw new m(`file contents of ${n} is null or empty.`);let l=s.trim();if(o=new Date(l),isNaN(o.getTime()))throw new m(`${r} contents contain an invalid ISO UTC datetime. 
                    Example: "2025-03-07T15:00:00+00:00" (YYYY-MM-DDTHH:MM:SS+00:00).`)}catch(r){o=null,r instanceof Error?e.error(e.LogLevel.WARN,t,t.asyncGetUtcDateFromContents,r):console.error("Caught Unknown Error",r)}return o})}static asyncGetParticipantsFromContents(n){return v(this,null,function*(){e.log(e.LogLevel.INFO,t,t.asyncGetParticipantsFromContents);let o=null;try{let r="participants file";if(!n)throw new m(`file name path to ${r} is null or empty.`);let i=yield fetch(n);if(!i.ok)throw new m(`failed to fetch ${r}.`);let s=yield i.text();if(!s)throw new m(`file contents of ${n} is null or empty.`);let l=s.split(`
`).map(a=>a.trim().replace(/^[^a-zA-Z]+/,"").replace(/[^a-zA-Z\s]+$/,"").replace(/\s+/g," ").trim()).filter(a=>a.length>0);if(o=Array.from(new Map(l.map(a=>[a.toLowerCase(),a])).values()),!o)throw new m(`${r} contains invalid name(s). 
                    Ensure that each name consists only of alphabetic characters and spaces separated by newline character.`)}catch(r){o=null,r instanceof Error?e.error(e.LogLevel.WARN,t,t.asyncGetParticipantsFromContents,r):console.error("Caught Unknown Error",r)}return o})}}});var Y,M=E(()=>{"use strict";h();Y=class t{static getRandomGenerator(n){let i=Math.pow(2,32),s=n;return()=>(s=(1664525*s+1013904223)%i,s/i)}static getRandomAssignments(n,o){e.log(e.LogLevel.TEST,t,t.getRandomAssignments);let r=new Array;if(!n)return r;let i=[...n];e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`before do/while -> picked.length = ${i.length}`);do{let l=i.length;e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,"inclusiveLower = 0"),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`exclusiveUpper = ${l}`);let a=o(),g=Math.floor(a*(l-0))+0;e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`random = ${a}`),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`upNext = ${g}`),(g<0||g>=i.length)&&e.log(e.LogLevel.INFO,t,t.getRandomAssignments,`Warning: failed to generate a valid random next person: 
                    inclusiveLower = 0, exclusiveUpper = ${l}, picked.length = ${i.length}, random = ${g}, upNext = ${g}`),r.push(i[g]),i.splice(g,1),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`end of do/while -> assignments.length = ${r.length}`),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`end of do/while -> picked.length = ${i.length}`)}while(i.length>0);return r}static getUniqueFirstPersonGroups(n,o){e.log(e.LogLevel.TEST,t,t.getUniqueFirstPersonGroups);let r=new Array;if(!o)return r;let i=n.getFullYear(),s=this.getRandomGenerator(i);e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`seed = ${i}`);let l=new Set(o);do{let a=this.getRandomAssignments(o,s);if(e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`randomAssignments.length = ${a.length}`),a){let g=a==null?void 0:a[0];e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`randomFirstPerson = ${g}`),g&&l.has(g)&&(e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,"$$$$$$$$$$ deleting random first person from first picks, and adding random assignments to group!!!"),l.delete(g),r.push(a))}}while(l.size>0);return r}}});var b,A=E(()=>{"use strict";I();h();k();M();b=class t{static getWeeklyMeetingsInYear(n,o){e.log(e.LogLevel.INFO,t,t.getWeeklyMeetingsInYear);let r=new Array;if(!o)return r;let i=L.getDayOfWeek(n),s=new Date(n.getFullYear(),0,1);for(;L.getDayOfWeek(s)!=i;)s.setDate(s.getDate()+1);e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`firstMeetingOfYear = ${s}`);let l=n.getFullYear(),a=n.getDate(),g=L.getNumDaysInYear(n),f=g-L.getDayOfYear(s);e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`totalDaysInYear = ${g}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`daysRemainingForMeetings = ${f}`);for(let y=1;y<=f;y++){let D=new Date(l,0,a+y),W=L.getDayOfWeek(D);W==i&&r.push({id:r.length+1,date:D,dayOfWeek:W,attendees:[]})}let d=r.length,F=d%o.length==0?d/o.length:d/o.length+1;e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`totalMeetingsInYear = ${d}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`numFirstPersonMeetingsInYear = ${F}`);let p=0;do{e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`start do/while -> currMeetingIdx = ${p}`);let y=Y.getUniqueFirstPersonGroups(s,o);if(y)for(let D=0;D<y.length&&p<r.length;D++)r[p].attendees=y[D],p++;e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`end do/while -> currMeetingIdx = ${p}`)}while(p<r.length);return r}static getMeetingForWeek(n,o){e.log(e.LogLevel.INFO,t,t.getMeetingForWeek);let r=new Array;try{if(!o)throw new m("names given for weekly meeting is null or empty.");let i=L.getDayOfWeek(n),s=L.getDayOfWeekOfYear(n,i);if(e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`meetingDayOfWeek = ${i}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`weekNumberInYear = ${s}`),s<=0)throw new m("invalid date given for meeting, unable to determine week number in year.");let l=this.getWeeklyMeetingsInYear(n,o);if(e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`meetings.length = ${l.length}`),!l)throw new m("unable to generate weekly meetings.");let a=l.find(g=>g.id===s);if(!a)throw new m("unable to find the weekly meeting for the given date from the list of generated meetings.");if(!a.attendees)throw new m("generated weekly meeting failed to populate the list of attendees.");r=a.attendees}catch(i){r=new Array,i instanceof Error?e.error(e.LogLevel.WARN,t,t.getMeetingForWeek,i):console.error("Caught Unknown Error",i)}return r}}});var G=N($=>{I();R();h();A();var T="/files/build.txt",U="/files/names.txt";document.addEventListener("DOMContentLoaded",()=>v($,null,function*(){e.log(e.LogLevel.INFO,"DOM",addEventListener);let t=new Date,n=document.getElementById("day-of-meeting");n&&(n.textContent=L.formatDateString(t));let o=document.getElementById("last-publish-datetime");if(o){let s=yield w.asyncGetUtcDateFromContents(T);o.textContent=s?L.formatDateString(s):"Invalid date"}let r=document.getElementById("participants-list"),i=r==null?void 0:r.querySelector("ul");if(r&&i){i.innerHTML="";let s=yield w.asyncGetParticipantsFromContents(U);if(s&&s.length>0){let l=b.getMeetingForWeek(t,s);l&&l.forEach((a,g)=>{let f=document.createElement("li"),d=document.createElement("span");d.textContent=`${g+1}`,f.appendChild(d),f.append(` ${a}`),i.appendChild(f)})}}}))});export default G();
