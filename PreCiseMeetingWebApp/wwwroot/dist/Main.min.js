var y=(t,n)=>()=>(t&&(n=t(t=0)),n);var C=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var w=(t,n,i)=>new Promise((o,r)=>{var s=g=>{try{l(i.next(g))}catch(f){r(f)}},a=g=>{try{l(i.throw(g))}catch(f){r(f)}},l=g=>g.done?o(g.value):Promise.resolve(g.value).then(s,a);l((i=i.apply(t,n)).next())});var u,b=y(()=>{"use strict";u=class extends Error{constructor(n){super(n),this.name="PreCiseException"}}});var c,e,E=y(()=>{"use strict";b();c=class c{static setLogLevel(n){c.CURRENT_LEVEL=n}static log(n,i,o,r){if(c.LogLevelPriority[n]<c.LogLevelPriority[c.CURRENT_LEVEL])return;let s=c.getLogHeader(n,i,o);r&&(s+=` ${r}`),console.log(s)}static error(n,i,o,r){if(c.LogLevelPriority[n]<c.LogLevelPriority[c.CURRENT_LEVEL])return;let s=c.getLogHeader(n,i,o);if(r&&r.message){let a="",l="";r instanceof u?a=c.nameof(u):(a="Unexpected Error",r.stack&&(l=`${typeof window=="undefined"?`\r
`:`
`}${r.stack}`)),s+=` ${a}: ${r.message}${l}`}console.log(s)}static getLogHeader(n,i,o){let r=new Date,s="";return typeof i=="string"?s=`${i}.`:s=`${c.nameof(i)}.`,`[${r}] [${n}] [${s}${c.nameof(o)}()]`}static nameof(n){return n.name}};c.LogLevel={TRACE:"TRACE",DEBUG:"DEBUG",TEST:"TEST",INFO:"INFO",PROD:"PROD",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL"},c.LogLevelPriority={[c.LogLevel.TRACE]:0,[c.LogLevel.DEBUG]:1,[c.LogLevel.TEST]:2,[c.LogLevel.INFO]:3,[c.LogLevel.PROD]:4,[c.LogLevel.WARN]:5,[c.LogLevel.ERROR]:6,[c.LogLevel.FATAL]:7},c.CURRENT_LEVEL=c.LogLevel.PROD;e=c});var k,R=y(()=>{"use strict";E();k=class t{static copyElementChangeState(){e.log(e.LogLevel.INFO,t,t.copyElementChangeState);let n=t.extractParticipants(),i=t.extractMeetingDateString();if(n&&i){let o=document.getElementById("copy-icon"),r=document.querySelector(".share-info");if(o&&r){t.insertNamesIntoClipboard(i,n);let s=r.textContent;r.textContent="Copied!",o.classList.remove("fa-copy"),o.classList.add("fa-check"),setTimeout(()=>{o.classList.remove("fa-check"),o.classList.add("fa-copy"),r.textContent=s!=null?s:"Copy",o.blur()},2500)}}}static extractParticipants(){e.log(e.LogLevel.TRACE,t,t.extractParticipants);let n=[],i=document.getElementById("participants-list");if(i){let o=i.querySelectorAll("li");o&&o.forEach(r=>{var a;let s=(a=r.textContent)==null?void 0:a.replace(/^\d+\s*/,"").trim();s&&n.push(s)})}return n}static extractMeetingDateString(){var o;e.log(e.LogLevel.TRACE,t,t.extractMeetingDateString);let n="",i=document.getElementById("day-of-meeting");if(i){let r=(o=i.textContent)==null?void 0:o.trim();r&&(n=r)}return n}static insertNamesIntoClipboard(n,i){if(e.log(e.LogLevel.TRACE,t,t.insertNamesIntoClipboard),n){let o=typeof window=="undefined"?`\r
`:`
`,r="--- START MEETING ---";r+=`${o}--- ${n} ---`,i&&i.forEach((s,a)=>{let l=a+1;r+=`${o}[${l}] ${s}`}),navigator.clipboard.writeText(r)}}}});var A,m,d,T=y(()=>{"use strict";E();A={Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday"},m=class m{static formatDateString(n,i={weekday:"long",year:"numeric",month:"long",day:"numeric"}){return e.log(e.LogLevel.TRACE,m,m.formatDateString),n.toLocaleDateString("en-US",i)}static getDayOfWeek(n){e.log(e.LogLevel.TRACE,m,m.getDayOfWeek);let i=n.getDay();return Object.keys(A)[i]}static getDayOfYear(n){e.log(e.LogLevel.TRACE,m,m.getDayOfYear);let i=new Date(n.getFullYear(),0,0),o=n.getTime()-i.getTime();return Math.floor(o/m.MILLISECONDS_IN_ONE_DAY_IN)}static getDayOfWeekOfYear(n,i){e.log(e.LogLevel.TRACE,m,m.getDayOfWeekOfYear);let o=Object.keys(A).indexOf(i);if(n.getDay()!==o)return 0;let r=m.getDayOfYear(n);return Math.floor(r/m.DAYS_IN_WEEK)+1}static isLeapYear(n){return e.log(e.LogLevel.TRACE,m,m.isLeapYear),n%4===0&&n%100!==0||n%400===0}static getNumDaysInYear(n){e.log(e.LogLevel.TRACE,m,m.getNumDaysInYear);let i=n.getFullYear(),o=m.NORMAL_DAYS_IN_YEAR;return m.isLeapYear(i)&&o++,o}};m.DAYS_IN_WEEK=7,m.NORMAL_DAYS_IN_YEAR=365,m.NORMAL_WEEKS_IN_YEAR=52,m.MILLISECONDS_IN_ONE_DAY_IN=1e3*60*60*24;d=m});var I,Y=y(()=>{"use strict";E();b();I=class t{static asyncGetUtcDateFromContents(n){return w(this,null,function*(){e.log(e.LogLevel.INFO,t,t.asyncGetUtcDateFromContents);let i=null;try{let o="publish details file";if(!n)throw new u(`file name path to ${o} is null or empty.`);let r=yield fetch(n);if(!r.ok)throw new u(`failed to fetch ${o}.`);let s=yield r.text();if(!s)throw new u(`file contents of ${n} is null or empty.`);let a=s.trim();if(i=new Date(a),isNaN(i.getTime()))throw new u(`${o} contents contain an invalid ISO UTC datetime. 
                    Example: "2025-03-07T15:00:00+00:00" (YYYY-MM-DDTHH:MM:SS+00:00).`)}catch(o){i=null,o instanceof Error?e.error(e.LogLevel.WARN,t,t.asyncGetUtcDateFromContents,o):console.error("Caught Unknown Error",o)}return i})}static asyncGetParticipantsFromContents(n){return w(this,null,function*(){e.log(e.LogLevel.INFO,t,t.asyncGetParticipantsFromContents);let i=null;try{let o="participants file";if(!n)throw new u(`file name path to ${o} is null or empty.`);let r=yield fetch(n);if(!r.ok)throw new u(`failed to fetch ${o}.`);let s=yield r.text();if(!s)throw new u(`file contents of ${n} is null or empty.`);let a=s.split(`
`).map(l=>l.trim().replace(/^[^a-zA-Z]+/,"").replace(/[^a-zA-Z\s]+$/,"").replace(/\s+/g," ").trim()).filter(l=>l.length>0);if(i=Array.from(new Map(a.map(l=>[l.toLowerCase(),l])).values()),!i)throw new u(`${o} contains invalid name(s). 
                    Ensure that each name consists only of alphabetic characters and spaces separated by newline character.`)}catch(o){i=null,o instanceof Error?e.error(e.LogLevel.WARN,t,t.asyncGetParticipantsFromContents,o):console.error("Caught Unknown Error",o)}return i})}}});var M,N=y(()=>{"use strict";E();M=class t{static getRandomGenerator(n){let r=Math.pow(2,32),s=n;return()=>(s=(1664525*s+1013904223)%r,s/r)}static getRandomAssignments(n,i){e.log(e.LogLevel.TEST,t,t.getRandomAssignments);let o=new Array;if(!n)return o;let r=[...n];e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`before do/while -> picked.length = ${r.length}`);do{let a=r.length;e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,"inclusiveLower = 0"),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`exclusiveUpper = ${a}`);let l=i(),g=Math.floor(l*(a-0))+0;e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`random = ${l}`),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`upNext = ${g}`),(g<0||g>=r.length)&&e.log(e.LogLevel.INFO,t,t.getRandomAssignments,`Warning: failed to generate a valid random next person: 
                    inclusiveLower = 0, exclusiveUpper = ${a}, picked.length = ${r.length}, random = ${g}, upNext = ${g}`),o.push(r[g]),r.splice(g,1),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`end of do/while -> assignments.length = ${o.length}`),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`end of do/while -> picked.length = ${r.length}`)}while(r.length>0);return o}static getUniqueFirstPersonGroups(n,i){e.log(e.LogLevel.TEST,t,t.getUniqueFirstPersonGroups);let o=new Array;if(!i)return o;let r=n.getFullYear(),s=this.getRandomGenerator(r);e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`seed = ${r}`);let a=new Set(i);do{let l=this.getRandomAssignments(i,s);if(e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`randomAssignments.length = ${l.length}`),l){let g=l==null?void 0:l[0];e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`randomFirstPerson = ${g}`),g&&a.has(g)&&(e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,"$$$$$$$$$$ deleting random first person from first picks, and adding random assignments to group!!!"),a.delete(g),o.push(l))}}while(a.size>0);return o}}});var O,F=y(()=>{"use strict";T();E();b();N();O=class t{static getWeeklyMeetingsInYear(n,i){e.log(e.LogLevel.INFO,t,t.getWeeklyMeetingsInYear);let o=new Array;if(!i)return o;let r=d.getDayOfWeek(n),s=new Date(n.getFullYear(),0,1);for(;d.getDayOfWeek(s)!=r;)s.setDate(s.getDate()+1);e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`firstMeetingOfYear = ${s}`);let a=n.getFullYear(),l=n.getDate(),g=d.getNumDaysInYear(n),f=g-d.getDayOfYear(s);e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`totalDaysInYear = ${g}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`daysRemainingForMeetings = ${f}`);for(let p=1;p<=f;p++){let h=new Date(a,0,l+p),$=d.getDayOfWeek(h);$==r&&o.push({id:o.length+1,date:h,dayOfWeek:$,attendees:[]})}let D=o.length,v=D%i.length==0?D/i.length:D/i.length+1;e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`totalMeetingsInYear = ${D}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`numFirstPersonMeetingsInYear = ${v}`);let L=0;do{e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`start do/while -> currMeetingIdx = ${L}`);let p=M.getUniqueFirstPersonGroups(s,i);if(p)for(let h=0;h<p.length&&L<o.length;h++)o[L].attendees=p[h],L++;e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`end do/while -> currMeetingIdx = ${L}`)}while(L<o.length);return o}static getMeetingForWeek(n,i){e.log(e.LogLevel.INFO,t,t.getMeetingForWeek);let o=new Array;try{if(!i)throw new u("names given for weekly meeting is null or empty.");let r=d.getDayOfWeek(n),s=d.getDayOfWeekOfYear(n,r);if(e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`meetingDayOfWeek = ${r}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`weekNumberInYear = ${s}`),s<=0)throw new u("invalid date given for meeting, unable to determine week number in year.");let a=this.getWeeklyMeetingsInYear(n,i);if(e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`meetings.length = ${a.length}`),!a)throw new u("unable to generate weekly meetings.");let l=a.find(g=>g.id===s);if(!l)throw new u("unable to find the weekly meeting for the given date from the list of generated meetings.");if(!l.attendees)throw new u("generated weekly meeting failed to populate the list of attendees.");o=l.attendees}catch(r){o=new Array,r instanceof Error?e.error(e.LogLevel.WARN,t,t.getMeetingForWeek,r):console.error("Caught Unknown Error",r)}return o}}});var W=C(x=>{R();T();Y();E();F();document.addEventListener("DOMContentLoaded",()=>w(x,null,function*(){e.log(e.LogLevel.INFO,"DOM",addEventListener);let t=new Date,n=document.getElementById("day-of-meeting");n&&(n.textContent=d.formatDateString(t));let i=document.getElementById("last-publish-datetime");if(i){let a=yield I.asyncGetUtcDateFromContents("/files/build.txt");i.textContent=a?d.formatDateString(a):"Invalid date"}let o=document.getElementById("participants-list"),r=o==null?void 0:o.querySelector("ul");if(o&&r){r.innerHTML="";let a=yield I.asyncGetParticipantsFromContents("/files/names.txt");if(a&&a.length>0){let l=O.getMeetingForWeek(t,a);if(l){l.forEach((f,D)=>{let v=document.createElement("li"),L=document.createElement("span");L.textContent=`${D+1}`,v.appendChild(L),v.append(` ${f}`),r.appendChild(v)});let g=document.getElementById("copy-button");g&&g.addEventListener("click",k.copyElementChangeState)}}}document.body.classList.remove("preload")}))});export default W();
