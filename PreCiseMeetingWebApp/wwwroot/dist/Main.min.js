var E=(t,n)=>()=>(t&&(n=t(t=0)),n);var N=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var w=(t,n,o)=>new Promise((r,i)=>{var a=g=>{try{s(o.next(g))}catch(L){i(L)}},l=g=>{try{s(o.throw(g))}catch(L){i(L)}},s=g=>g.done?r(g.value):Promise.resolve(g.value).then(a,l);s((o=o.apply(t,n)).next())});var m,k=E(()=>{"use strict";m=class extends Error{constructor(n){super(n),this.name="PreCiseException"}}});var u,e,h=E(()=>{"use strict";k();u=class u{static setLogLevel(n){u.CURRENT_LEVEL=n}static log(n,o,r,i){if(u.LogLevelPriority[n]<u.LogLevelPriority[u.CURRENT_LEVEL])return;let a=this.getLogHeader(n,o,r);i&&(a+=` ${i}`),console.log(a)}static error(n,o,r,i){if(u.LogLevelPriority[n]<u.LogLevelPriority[u.CURRENT_LEVEL])return;let a=this.getLogHeader(n,o,r);if(i&&i.message){let l="",s="";i instanceof m?l=this.nameof(m):(l="Unexpected Error",i.stack&&(s=`${typeof window=="undefined"?`\r
`:`
`}${i.stack}`)),a+=` ${l}: ${i.message}${s}`}console.log(a)}static getLogHeader(n,o,r){let i=new Date,a="";return typeof o=="string"?a=`${o}.`:a=`${this.nameof(o)}.`,`[${i}] [${n}] [${a}${this.nameof(r)}()]`}static nameof(n){return n.name}};u.LogLevel={TRACE:"TRACE",DEBUG:"DEBUG",TEST:"TEST",INFO:"INFO",PROD:"PROD",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL"},u.LogLevelPriority={[u.LogLevel.TRACE]:0,[u.LogLevel.DEBUG]:1,[u.LogLevel.TEST]:2,[u.LogLevel.INFO]:3,[u.LogLevel.PROD]:4,[u.LogLevel.WARN]:5,[u.LogLevel.ERROR]:6,[u.LogLevel.FATAL]:7},u.CURRENT_LEVEL=u.LogLevel.PROD;e=u});var I,c,f,Y=E(()=>{"use strict";h();I={Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday"},c=class c{static formatDateString(n,o={weekday:"long",year:"numeric",month:"long",day:"numeric"}){return e.log(e.LogLevel.TRACE,c,c.formatDateString),n.toLocaleDateString("en-US",o)}static convertUtcDateToLocal(n=new Date){e.log(e.LogLevel.TRACE,c,c.convertUtcDateToLocal);let o=new Date().getTimezoneOffset();return new Date(n.getTime()-o*6e4)}static getDayOfWeek(n){e.log(e.LogLevel.TRACE,c,c.getDayOfWeek);let o=n.getDay();return Object.keys(I)[o]}static getDayOfYear(n){e.log(e.LogLevel.TRACE,c,c.getDayOfYear);let o=new Date(n.getFullYear(),0,0),r=n.getTime()-o.getTime();return Math.floor(r/this.MILLISECONDS_IN_ONE_DAY_IN)}static getDayOfWeekOfYear(n,o){e.log(e.LogLevel.TRACE,c,c.getDayOfWeekOfYear);let r=Object.keys(I).indexOf(o);if(n.getDay()!==r)return 0;let i=this.getDayOfYear(n);return Math.floor(i/this.DAYS_IN_WEEK)+1}static isLeapYear(n){return e.log(e.LogLevel.TRACE,c,c.isLeapYear),n%4===0&&n%100!==0||n%400===0}static getNumDaysInYear(n){e.log(e.LogLevel.TRACE,c,c.getNumDaysInYear);let o=n.getFullYear(),r=this.NORMAL_DAYS_IN_YEAR;return this.isLeapYear(o)&&r++,r}static getNumWeeksInYear(n){e.log(e.LogLevel.TRACE,c,c.getNumWeeksInYear);let o=n.getFullYear(),r=this.isLeapYear(o),i=new Date(o,0,1),a=new Date(o,12,31),l=this.getDayOfWeek(i),s=this.getDayOfWeek(a),g=l===I.Thursday||r&&s===I.Wednesday,L=this.NORMAL_WEEKS_IN_YEAR;return g&&L++,L}};c.DAYS_IN_WEEK=7,c.NORMAL_DAYS_IN_YEAR=365,c.NORMAL_WEEKS_IN_YEAR=52,c.MILLISECONDS_IN_ONE_DAY_IN=1e3*60*60*24;f=c});var O,R=E(()=>{"use strict";h();k();O=class t{static asyncGetUtcDateFromContents(n){return w(this,null,function*(){e.log(e.LogLevel.INFO,t,t.asyncGetUtcDateFromContents);let o=null;try{let r="publish details file";if(!n)throw new m(`file name path to ${r} is null or empty.`);let i=yield fetch(n);if(!i.ok)throw new m(`failed to fetch ${r}.`);let a=yield i.text();if(!a)throw new m(`file contents of ${n} is null or empty.`);let l=a.trim();if(o=new Date(l),isNaN(o.getTime()))throw new m(`${r} contents contain an invalid ISO UTC datetime. 
                    Example: "2025-03-07T15:00:00+00:00" (YYYY-MM-DDTHH:MM:SS+00:00).`)}catch(r){o=null,r instanceof Error?e.error(e.LogLevel.WARN,t,t.asyncGetUtcDateFromContents,r):console.error("Caught Unknown Error",r)}return o})}static asyncGetParticipantsFromContents(n){return w(this,null,function*(){e.log(e.LogLevel.INFO,t,t.asyncGetParticipantsFromContents);let o=null;try{let r="participants file";if(!n)throw new m(`file name path to ${r} is null or empty.`);let i=yield fetch(n);if(!i.ok)throw new m(`failed to fetch ${r}.`);let a=yield i.text();if(!a)throw new m(`file contents of ${n} is null or empty.`);let l=a.split(`
`).map(s=>s.trim().replace(/^[^a-zA-Z]+/,"").replace(/[^a-zA-Z\s]+$/,"").replace(/\s+/g," ").trim()).filter(s=>s.length>0);if(o=Array.from(new Map(l.map(s=>[s.toLowerCase(),s])).values()),!o)throw new m(`${r} contains invalid name(s). 
                    Ensure that each name consists only of alphabetic characters and spaces separated by newline character.`)}catch(r){o=null,r instanceof Error?e.error(e.LogLevel.WARN,t,t.asyncGetParticipantsFromContents,r):console.error("Caught Unknown Error",r)}return o})}}});var b,W=E(()=>{"use strict";h();b=class t{static getRandomGenerator(n){let i=Math.pow(2,32),a=n;return()=>(a=(1664525*a+1013904223)%i,a/i)}static getRandomAssignments(n,o){e.log(e.LogLevel.TEST,t,t.getRandomAssignments);let r=new Array;if(!n)return r;let i=[...n];e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`before do/while -> picked.length = ${i.length}`);do{let l=i.length;e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,"inclusiveLower = 0"),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`exclusiveUpper = ${l}`);let s=o(),g=Math.floor(s*(l-0))+0;e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`random = ${s}`),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`upNext = ${g}`),(g<0||g>=i.length)&&e.log(e.LogLevel.INFO,t,t.getRandomAssignments,`Warning: failed to generate a valid random next person: 
                    inclusiveLower = 0, exclusiveUpper = ${l}, picked.length = ${i.length}, random = ${g}, upNext = ${g}`),r.push(i[g]),i.splice(g,1),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`end of do/while -> assignments.length = ${r.length}`),e.log(e.LogLevel.DEBUG,t,t.getRandomAssignments,`end of do/while -> picked.length = ${i.length}`)}while(i.length>0);return r}static getUniqueFirstPersonGroups(n,o){e.log(e.LogLevel.TEST,t,t.getUniqueFirstPersonGroups);let r=new Array;if(!o)return r;let i=n.getFullYear(),a=this.getRandomGenerator(i);e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`seed = ${i}`);let l=new Set(o);do{let s=this.getRandomAssignments(o,a);if(e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`randomAssignments.length = ${s.length}`),s){let g=s==null?void 0:s[0];e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,`randomFirstPerson = ${g}`),g&&l.has(g)&&(e.log(e.LogLevel.DEBUG,t,t.getUniqueFirstPersonGroups,"$$$$$$$$$$ deleting random first person from first picks, and adding random assignments to group!!!"),l.delete(g),r.push(s))}}while(l.size>0);return r}}});var M,$=E(()=>{"use strict";Y();h();k();W();M=class t{static getWeeklyMeetingsInYear(n,o){e.log(e.LogLevel.INFO,t,t.getWeeklyMeetingsInYear);let r=new Array;if(!o)return r;let i=f.getDayOfWeek(n),a=new Date(n.getFullYear(),0,1);for(;f.getDayOfWeek(a)!=i;)a.setDate(a.getDate()+1);e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`firstMeetingOfYear = ${a}`);let l=n.getFullYear(),s=n.getDate(),g=f.getNumDaysInYear(n),L=g-f.getDayOfYear(a);e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`totalDaysInYear = ${g}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`daysRemainingForMeetings = ${L}`);for(let y=1;y<=L;y++){let D=new Date(l,0,s+y),T=f.getDayOfWeek(D);T==i&&r.push({id:r.length+1,date:D,dayOfWeek:T,attendees:[]})}let p=r.length,v=p%o.length==0?p/o.length:p/o.length+1;e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`totalMeetingsInYear = ${p}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`numFirstPersonMeetingsInYear = ${v}`);let d=0;do{e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`start do/while -> currMeetingIdx = ${d}`);let y=b.getUniqueFirstPersonGroups(a,o);if(y)for(let D=0;D<y.length&&d<r.length;D++)r[d].attendees=y[D],d++;e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`end do/while -> currMeetingIdx = ${d}`)}while(d<r.length);return r}static getMeetingForWeek(n,o){e.log(e.LogLevel.INFO,t,t.getMeetingForWeek);let r=new Array;try{if(!o)throw new m("names given for weekly meeting is null or empty.");let i=f.getDayOfWeek(n),a=f.getDayOfWeekOfYear(n,i);if(e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`meetingDayOfWeek = ${i}`),e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`weekNumberInYear = ${a}`),a<=0)throw new m("invalid date given for meeting, unable to determine week number in year.");let l=this.getWeeklyMeetingsInYear(n,o);if(e.log(e.LogLevel.DEBUG,t,t.getWeeklyMeetingsInYear,`meetings.length = ${l.length}`),!l)throw new m("unable to generate weekly meetings.");let s=l.find(g=>g.id===a);if(!s)throw new m("unable to find the weekly meeting for the given date from the list of generated meetings.");if(!s.attendees)throw new m("generated weekly meeting failed to populate the list of attendees.");r=s.attendees}catch(i){r=new Array,i instanceof Error?e.error(e.LogLevel.WARN,t,t.getMeetingForWeek,i):console.error("Caught Unknown Error",i)}return r}}});var G=N(A=>{Y();R();h();$();document.addEventListener("DOMContentLoaded",()=>w(A,null,function*(){e.log(e.LogLevel.PROD,"DOM",addEventListener);let t=new Date,n=document.getElementById("day-of-meeting");n&&(n.textContent=f.formatDateString(t));let o=document.getElementById("last-publish-datetime");if(o){let l=yield O.asyncGetUtcDateFromContents("/files/build.txt");o.textContent=l?f.formatDateString(l):"Invalid date"}let r=document.getElementById("participants-list"),i=r==null?void 0:r.querySelector("ul");if(r&&i){i.innerHTML="";let l=yield O.asyncGetParticipantsFromContents("/files/names.txt");if(l&&l.length>0){let s=M.getMeetingForWeek(t,l);if(s){s.forEach((L,p)=>{let v=document.createElement("li"),d=document.createElement("span");d.textContent=`${p+1}`,v.appendChild(d),v.append(` ${L}`),i.appendChild(v)}),e.log(e.LogLevel.PROD,"DOM",addEventListener,"before getting buttonElement...");let g=document.getElementById("copy-button");e.log(e.LogLevel.PROD,"DOM",addEventListener,"after getting buttonElement..."),g&&(e.log(e.LogLevel.PROD,"DOM",addEventListener,"buttonElement found!"),g.addEventListener("click",F))}}}}));function F(){let t=U(),n=x(),o=document.getElementById("copy-icon");t&&n&&o&&(o.classList.remove("fa-copy"),C(n,t),o.classList.add("fa-check"))}function U(){let t=[],n=document.getElementById("participants-list");if(n){let o=n.querySelectorAll("li");o&&o.forEach(r=>{var a;let i=(a=r.textContent)==null?void 0:a.replace(/^\d+\s*/,"").trim();i&&t.push(i)})}return t}function x(){var o;let t=null,n=document.getElementById("day-of-meeting");if(n){let r=(o=n.textContent)==null?void 0:o.trim();r&&(t=new Date(r))}return t}function C(t,n){let o="--- START MEETING ---";if(t){let r=typeof window=="undefined"?`\r
`:`
`;o+=`${r}--- ${t} ---`,n&&n.forEach((i,a)=>{o+=`${r}[${a}] ${i}`}),navigator.clipboard.writeText(o)}}});export default G();
