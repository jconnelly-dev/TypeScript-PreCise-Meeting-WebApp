var __awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((i=i.apply(e,t||[])).next())}))};import{DateHelper}from"./DateHelper.js";import{FileHelper}from"./FileHelper.js";import{Logger}from"./Logger.js";import{Meetings}from"./Meetings.js";const FILE_BUILD_DETAILS="/files/build.txt",FILE_MEETING_NAMES="/files/names.txt";document.addEventListener("DOMContentLoaded",(()=>__awaiter(void 0,void 0,void 0,(function*(){Logger.log(Logger.LogLevel.INFO,"DOM",addEventListener);const e=new Date,t=document.getElementById("day-of-meeting");t&&(t.textContent=DateHelper.formatDateString(e));const n=document.getElementById("last-publish-datetime");if(n){const e=yield FileHelper.asyncGetUtcDateFromContents("/files/build.txt");n.textContent=e?DateHelper.formatDateString(e):"Invalid date"}const i=document.getElementById("participants-list"),o=null==i?void 0:i.querySelector("ul");if(i&&o){o.innerHTML="";const t=yield FileHelper.asyncGetParticipantsFromContents("/files/names.txt");if(t&&t.length>0){const n=Meetings.getMeetingForWeek(e,t);n&&n.forEach(((e,t)=>{const n=document.createElement("li"),i=document.createElement("span");i.textContent=`${t+1}`,n.appendChild(i),n.append(` ${e}`),o.appendChild(n)}))}}}))));